(this["webpackJsonphexagonal-2048"]=this["webpackJsonphexagonal-2048"]||[]).push([[0],{10:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(4),s=n.n(r),u=n(2),i=[{id:"localhost",value:"http://localhost:13337"},{id:"server",value:"//68f02c80-3bed-4e10-a747-4ff774ae905a.pub.instances.scw.cloud"}],l=n(0);function o(e){for(var t=e.level,n=e.changeLevel,c=e.server,r=e.setServer,s=[],u=function(e){s.push(Object(l.jsx)("button",{className:t===e?"active":"",onClick:function(){return n(e)},children:e},e))},o="2";o<="4";o++)u(o);var f=Object(a.useCallback)((function(e){r(e.target.value)}),[c]);return Object(l.jsxs)("div",{className:"menu",children:[Object(l.jsxs)("dl",{className:"menu-item",children:["RNG-server url",Object(l.jsx)("select",{id:"url-server",onChange:f,value:c,children:i.map((function(e,t){return Object(l.jsx)("option",{id:e.id,value:e.value,children:e.value},t)}))})]}),Object(l.jsxs)("dl",{className:"menu-item",children:[Object(l.jsx)("dt",{className:"menu-title",children:"Select radius"}),Object(l.jsx)("dd",{className:"menu-items",children:s})]})]})}function f(e){var t=e.status;return Object(l.jsxs)("div",{className:"status",children:["Game status: ",Object(l.jsx)("span",{"data-status":t.title,children:t.title})]})}function v(e){for(var t=e.level,n=e.cells,c=[],r=function(e){for(var r=[],s=n.filter((function(t){return t.x===e})),u=t-1-(e<=0?0:e),i=function(t){var n=0-e-u,c=s.find((function(e){return e.y===u&&e.z===n})),i=c&&c.value||0;r.push(Object(l.jsx)("div",{className:"hexagon","data-value":i,"data-x":e,"data-y":u,"data-z":n,children:i?Object(l.jsx)("span",{className:"value",children:i}):Object(l.jsx)(a.Fragment,{})},t)),u--},o=0;o<2*t-1-Math.abs(e);o++)i(o);c.push(r)},s=1-t;s<t;s++)r(s);return Object(l.jsx)("div",{className:"game level-"+t,children:c.map((function(e,t){return Object(l.jsx)("div",{className:"column",children:e},t)}))})}var d={roundSelect:{title:"round-select",showArea:!1},playing:{title:"playing",showArea:!0},gameOver:{title:"game-over",showArea:!0},networkUnavailable:{title:"network-unavailable",showArea:!1}},j=function(e,t,n,a,c){for(var r=[],s=!1,u=function(u){for(var i=e.filter((function(e){return e[t]===u})),l=c-1-(u<=0?0:u),o=l,f=function(e){var t=0-u-o,c=i.findIndex((function(e){return e[n]===o&&e[a]===t}));if(-1!==c){for(var r=i.splice(c,1)[0],f=function(e){var t=i.findIndex((function(t){return t[n]===e&&t[a]===0-u-e}));if(-1===t)r[n]=e,r[a]=0-u-e,s=!0;else{if(i[t].value!==r.value)return l=e,"break";if(i[t].value===r.value)return i[t].value*=2,s=!0,l=e-1,r=null,"break"}},v=o+1;v<=l;v++){if("break"===f(v))break}r&&i.push(r)}o--},v=0;v<2*c-1-Math.abs(u);v++)f();r=r.concat(i)},i=c-1;i>-c;i--)u(i);return{hasMoved:s,newCells:r}};function b(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,c=Object(a.useRef)();Object(a.useEffect)((function(){c.current=t}),[t]),Object(a.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return c.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])}var h=function(){var e=Object(a.useState)(0),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(d.roundSelect),s=Object(u.a)(r,2),h=s[0],O=s[1],x=Object(a.useState)(i[1].value),m=Object(u.a)(x,2),g=m[0],w=m[1],y=Object(a.useState)([]),p=Object(u.a)(y,2),k=p[0],z=p[1],S=Object(a.useState)(0),N=Object(u.a)(S,2),C=N[0],E=N[1],F=function(e){O(d.playing),c(e),z([]),A(g,e,[])},L=function(){switch(window.location.hash){case"#test2":F(2);break;case"#test3":F(3);break;case"#test4":F(4)}};b("keydown",Object(a.useCallback)((function(e){if(h.title===d.playing.title){var t=null;switch(e.keyCode){case 81:t=j(k,"z","y","x",n);break;case 87:t=j(k,"x","y","z",n);break;case 69:t=j(k,"y","x","z",n);break;case 65:t=j(k,"y","z","x",n);break;case 83:t=j(k,"x","z","y",n);break;case 68:t=j(k,"z","x","y",n)}t&&t.hasMoved&&(z(t.newCells),A(g,n,t.newCells))}}),[h,k])),b("load",L),b("hashchange",L);var A=function(e,t,n){fetch(e+"/"+t,{method:"POST",body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){return z(n.concat(e))})).catch((function(){return O(d.networkUnavailable)}))};return Object(a.useEffect)((function(){n&&k.length===C&&!k.some((function(e){return k.filter((function(t){return t.x===e.x-1&&t.y===e.y&&t.z===e.z+1||t.x===e.x&&t.y===e.y-1&&t.z===e.z+1||t.x===e.x+1&&t.y===e.y-1&&t.z===e.z})).some((function(t){return t.value===e.value}))}))&&O(d.gameOver)}),[n,k,C]),Object(a.useEffect)((function(){E(3*Math.pow(n,2)-3*n+1)}),[n,E]),Object(l.jsxs)("main",{children:[Object(l.jsx)(o,{level:n,changeLevel:F,server:g,setServer:w}),h.showArea?Object(l.jsx)(v,{level:n,cells:k}):Object(l.jsx)(a.Fragment,{}),Object(l.jsx)(f,{status:h}),h.showArea?Object(l.jsx)("p",{children:Object(l.jsx)("i",{children:"Use q, w, e, a, s, d keys for move"})}):Object(l.jsx)(a.Fragment,{})]})},O=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,11)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(h,{})}),document.getElementById("root")),O()}},[[10,1,2]]]);
//# sourceMappingURL=main.ef5dcde0.chunk.js.map
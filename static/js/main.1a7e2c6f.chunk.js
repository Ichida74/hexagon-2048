(this["webpackJsonphexagonal-2048"]=this["webpackJsonphexagonal-2048"]||[]).push([[0],{10:function(e,t,n){"use strict";n.r(t);var a=n(1),c=n.n(a),r=n(4),s=n.n(r),u=n(2),l=[{id:"localhost",value:"http://localhost:13337"},{id:"server",value:"//68f02c80-3bed-4e10-a747-4ff774ae905a.pub.instances.scw.cloud"}],i=n(0);function o(e){for(var t=e.level,n=e.changeLevel,c=e.server,r=e.setServer,s=[],u=function(e){s.push(Object(i.jsx)("button",{className:t===e?"active":"",onClick:function(){return n(e)},children:e},e))},o="2";o<="4";o++)u(o);var f=Object(a.useCallback)((function(e){r(e.target.value)}),[c]);return Object(i.jsxs)("div",{className:"menu",children:[Object(i.jsxs)("dl",{className:"menu-item",children:["RNG-server url",Object(i.jsx)("select",{id:"url-server",onChange:f,value:c,children:l.map((function(e,t){return Object(i.jsx)("option",{id:e.id,value:e.value,children:e.value},t)}))})]}),Object(i.jsxs)("dl",{className:"menu-item",children:[Object(i.jsx)("dt",{className:"menu-title",children:"Select radius"}),Object(i.jsx)("dd",{className:"menu-items",children:s})]})]})}function f(e){var t=e.status;return Object(i.jsxs)("div",{className:"status",children:["Game status: ",Object(i.jsx)("span",{"data-status":t.title,children:t.title})]})}function v(e){for(var t=e.level,n=e.cells,c=[],r=function(e){for(var r=[],s=n.filter((function(t){return t.x===e})),u=t-1-(e<=0?0:e),l=function(t){var n=0-e-u,c=s.find((function(e){return e.y===u&&e.z===n})),l=c&&c.value||0;r.push(Object(i.jsx)("div",{className:"hexagon","data-value":l,"data-x":e,"data-y":u,"data-z":n,children:l?Object(i.jsx)("span",{className:"value",children:l}):Object(i.jsx)(a.Fragment,{})},t)),u--},o=0;o<2*t-1-Math.abs(e);o++)l(o);c.push(r)},s=1-t;s<t;s++)r(s);return Object(i.jsx)("div",{className:"game level-"+t,children:c.map((function(e,t){return Object(i.jsx)("div",{className:"column",children:e},t)}))})}var j={roundSelect:{title:"round-select",showArea:!1},playing:{title:"playing",showArea:!0},gameOver:{title:"game-over",showArea:!0},networkUnavailable:{title:"network-unavailable",showArea:!1}},d=function(e,t,n,a,c){for(var r=[],s=!1,u=function(u){for(var l=e.filter((function(e){return e[t]===u})),i=c-1-(u<=0?0:u),o=i,f=function(e){var t=0-u-o,c=l.findIndex((function(e){return e[n]===o&&e[a]===t}));if(-1!==c){for(var r=l.splice(c,1)[0],f=function(e){var t=l.findIndex((function(t){return t[n]===e&&t[a]===0-u-e}));if(-1===t)r[n]=e,r[a]=0-u-e,s=!0;else{if(l[t].value!==r.value)return i=e,"break";if(l[t].value===r.value)return l[t].value*=2,s=!0,i=e-1,r=null,"break"}},v=o+1;v<=i;v++){if("break"===f(v))break}r&&l.push(r)}o--},v=0;v<2*c-1-Math.abs(u);v++)f();r=r.concat(l)},l=c-1;l>-c;l--)u(l);return{hasMoved:s,newCells:r}};var b=function(){var e=Object(a.useState)(0),t=Object(u.a)(e,2),n=t[0],c=t[1],r=Object(a.useState)(j.roundSelect),s=Object(u.a)(r,2),b=s[0],h=s[1],O=Object(a.useState)(l[1].value),x=Object(u.a)(O,2),m=x[0],g=x[1],y=Object(a.useState)([]),p=Object(u.a)(y,2),w=p[0],k=p[1],z=Object(a.useState)(0),S=Object(u.a)(z,2),N=S[0],C=S[1];!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,c=Object(a.useRef)();Object(a.useEffect)((function(){c.current=t}),[t]),Object(a.useEffect)((function(){if(n&&n.addEventListener){var t=function(e){return c.current(e)};return n.addEventListener(e,t),function(){n.removeEventListener(e,t)}}}),[e,n])}("keydown",Object(a.useCallback)((function(e){if(b.title===j.playing.title){var t=null;switch(e.keyCode){case 81:t=d(w,"z","y","x",n);break;case 87:t=d(w,"x","y","z",n);break;case 69:t=d(w,"y","x","z",n);break;case 65:t=d(w,"y","z","x",n);break;case 83:t=d(w,"x","z","y",n);break;case 68:t=d(w,"z","x","y",n)}t&&t.hasMoved&&(k(t.newCells),E(m,n,t.newCells))}}),[b,w]));var E=function(e,t,n){fetch(e+"/"+t,{method:"POST",body:JSON.stringify(n)}).then((function(e){return e.json()})).then((function(e){return k(n.concat(e))})).catch((function(){return h(j.networkUnavailable)}))};return Object(a.useEffect)((function(){n&&w.length===N&&!w.some((function(e){return w.filter((function(t){return t.x===e.x-1&&t.y===e.y&&t.z===e.z+1||t.x===e.x&&t.y===e.y-1&&t.z===e.z+1||t.x===e.x+1&&t.y===e.y-1&&t.z===e.z})).some((function(t){return t.value===e.value}))}))&&h(j.gameOver)}),[n,w,N]),Object(a.useEffect)((function(){C(3*Math.pow(n,2)-3*n+1)}),[n,C]),Object(i.jsxs)("main",{children:[Object(i.jsx)(o,{level:n,changeLevel:function(e){h(j.playing),c(e),k([]),E(m,e,[])},server:m,setServer:g}),b.showArea?Object(i.jsx)(v,{level:n,cells:w}):Object(i.jsx)(a.Fragment,{}),Object(i.jsx)(f,{status:b}),b.showArea?Object(i.jsx)("p",{children:Object(i.jsx)("i",{children:"Use q, w, e, a, s, d keys for move"})}):Object(i.jsx)(a.Fragment,{})]})},h=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,11)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),a(e),c(e),r(e),s(e)}))};s.a.render(Object(i.jsx)(c.a.StrictMode,{children:Object(i.jsx)(b,{})}),document.getElementById("root")),h()}},[[10,1,2]]]);
//# sourceMappingURL=main.1a7e2c6f.chunk.js.map